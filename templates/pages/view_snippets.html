{% extends 'base.html' %}
{% block content %}
{% load static %}

<!-- Begin page content -->
<main role="main" class="mt-3 flex-shrink-0">
    <div class="container">
        <div class="row">
            <div class="col text-center">
                <h1>{{ pagename }}</h1>
                <hr>
            </div>
        </div>

        <div class="row">
            <div class="col">
                {% comment %} <p>На данной страницы будут отображаться все созданные сниппеты.</p>
                <p>Пока тут просто пример, но скоро заменим реальными сниппетами из БД!</p> {% endcomment %}
                {% comment %} <hr> {% endcomment %}
            </div>
        </div>

        <div class="row">
            <div class="col">
                <table class="table table-striped">
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Название</th>
                        <th scope="col">Иконки</th>
                        <th scope="col">Язык</th>
                        <th scope="col">Дата создания</th>
                        <th scope="col">Дeйствия</th>
                        <th scope="col">Автор</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for snippet in snippets %}    
                        <tr>
                           <td scope="row">{{ snippet.id }}</td>
                            <td>
                                <a href="{% url "snippet-detail" snippet.id %}"> {{ snippet.name }}</a>
                            </td>
                            <td>
                                <a href="{% url "snippet-delete" snippet.id %}"> 
                                    <i style="color: red;" class="fa-solid fa-trash"></i>&nbsp;&nbsp;
                                </a>
                                <a href="{% url "snippet-edit" snippet.id %}"> 
                                    <i style="color: teal;" class="fa-solid fa-pen-to-square"></i>
                                </a>
                            </td>
                            
                            <td> {{ snippet.lang }} </td>
                            {# Ссылка на возможности форматирования дат #}
                            {# https://docs.djangoproject.com/en/5.2/ref/templates/builtins/#std-templatefilter-date #}
                            <td> {{ snippet.creation_date | date:"d F Y H:i:s" }}</td>
                            <td>


                                <div style="display: flex; flex-direction: row;">
                                <a href="{% url "snippet-edit" snippet.id %}" class="btn btn-info">Edit</a>

                                {% comment %} пробелы {% endcomment %}
                                &nbsp;&nbsp; 


                                <form action="{% url "snippet-delete" snippet.id %}" methot="post">
                                    <button type="submit" class ="btn btn-danger">Delete</button>
                                    {% csrf_token %}
                                </form>
                                </div>
                            </td>
                            <td>{{ snippet.user.username}}</td>
                            
                        </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4">Нет доступных сниппетов!</td>
                    </tr>


                    {% endfor %}

                    </tbody>
                </table>
                <div align="right">
                    <i style="color: gray;">Всего сниппетов: {{ snippets_count }} или {{ snippets.count}}</i>
                    {% comment %} <i style="color: gray;">Всего сниппетов: 2</i> {% endcomment %}
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

<!-- Optional JavaScript -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" crossorigin="anonymous"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" crossorigin="anonymous"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" crossorigin="anonymous"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"></script>
</body>

</html>